# leetcode-------13---------罗马数字转整数

罗马数字包含以下七种字符: `I`， `V`， `X`， `L`，`C`，`D` 和 `M`。

```
字符          数值
I             1
V             5
X             10
L             50
C             100
D             500
M             1000
```

例如， 罗马数字 `2` 写做 `II` ，即为两个并列的 1 。`12` 写做 `XII` ，即为 `X` + `II` 。 `27` 写做 `XXVII`, 即为 `XX` + `V` + `II` 。

通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 `IIII`，而是 `IV`。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 `IX`。这个特殊的规则只适用于以下六种情况：

- `I` 可以放在 `V` (5) 和 `X` (10) 的左边，来表示 4 和 9。
- `X` 可以放在 `L` (50) 和 `C` (100) 的左边，来表示 40 和 90。 
- `C` 可以放在 `D` (500) 和 `M` (1000) 的左边，来表示 400 和 900。

给定一个罗马数字，将其转换成整数。





解法：

```python
def roman_to_int(s):
    roman_values = {
        'I': 1,
        'V': 5,
        'X': 10,
        'L': 50,
        'C': 100,
        'D': 500,
        'M': 1000
    }
    
    result = 0
    prev_value = 0
    
    for char in reversed(s):
        curr_value = roman_values[char]
        if curr_value < prev_value:
            result -= curr_value
        else:
            result += curr_value
        prev_value = curr_value
    
    return result

```





如果你的代码在运行时出现超时问题，可能是因为当前实现的效率不够高。我们可以尝试优化算法，以提高执行速度。下面提供一种更有效率的方法来解析罗马数字转换为整数的问题。

### 优化方法：从右往左扫描

罗马数字的规则是，一般情况下小数字在大数字的右边表示加法，小数字在大数字的左边表示减法。因此，可以从右向左扫描罗马数字字符串：

1. 初始化一个变量 `result` 为 0，用来累加最终的整数值。
2. 从倒数第二个字符开始向左遍历：
   - 如果当前字符表示的数值小于后面字符表示的数值，则做减法（例如 IV 表示 4）。
   - 否则做加法。
3. 最后加上最左边的字符表示的数值，得到最终结果。

这种方法只需一次线性扫描字符串，时间复杂度为 O(n)，其中 n 是罗马数字字符串的长度。







### 实现说明

- **`reversed(s)`**: 迭代器函数，使我们能够从右向左遍历字符串 `s`。

- **`prev_value`**: 用来记录上一个字符对应的数值，以便判断当前字符是加还是减。

- **`curr_value`**: 当前字符对应的数值。

- 循环体

  :

  - 如果 `curr_value < prev_value`，则表示当前字符表示的数值要减去，因为它在大数的左边（例如 IV）。
  - 否则，表示当前字符表示的数值要加上。

- 最终返回 `result`，即转换后的整数值。

### 示例

例如，对于输入的罗马数字 "MCMXCIV"，使用这种方法将得到正确的结果 1994。