# 215--------数组中第k个最大元素

给定整数数组 `nums` 和整数 `k`，请返回数组中第 `**k**` 个最大的元素。

请注意，你需要找的是数组排序后的第 `k` 个最大的元素，而不是第 `k` 个不同的元素。

你必须设计并实现时间复杂度为 `O(n)` 的算法解决此问题。





```python
import heapq

def findKthLargest(nums, k):
    # 创建一个最小堆
    min_heap = []
    
    # 遍历数组
    for num in nums:
        # 将元素加入堆
        heapq.heappush(min_heap, num)
        # 如果堆的大小超过了 k，弹出堆顶元素（最小元素）
        if len(min_heap) > k:
            heapq.heappop(min_heap)
    
    # 堆顶元素即为第 k 个最大的元素
    return heapq.heappop(min_heap)

# 示例用法
nums = [3, 2, 1, 5, 6, 4]
k = 2
print(findKthLargest(nums, k))  # 输出 5

```

要解决这个问题，我们可以利用一个最小堆（Min-Heap）来找到数组中第 k 个最大的元素。这种方法的时间复杂度可以达到 O(n + k \log n)，非常适合大规模数据的情况。

这里是详细的步骤和Python代码实现：

1. **使用最小堆的思路**：
   - 维护一个最小堆，堆的大小为 k。
   - 遍历数组，将数组的元素依次加入堆中。
   - 如果堆的大小超过 k，即堆中元素多于 k 个，就弹出堆顶元素（最小的元素），保持堆的大小为 k。
2. **堆操作**：
   - Python 中可以使用 `heapq` 库来实现堆的操作，其中 `heapq.heappush(heap, item)` 可以将元素加入堆中，而 `heapq.heappop(heap)` 则可以弹出堆顶元素（即最小元素）。
3. **结果**：
   - 当遍历完数组后，堆顶元素就是数组中第 k 个最大的元素，因为堆顶是堆中最小的元素，而我们保证堆中有 k 个元素且它们是当前找到的最大的 k 个元素之一。





这段代码中，我们通过遍历数组 nums，并利用 `heapq.heappush` 将元素加入最小堆中。如果堆的大小超过 k，我们则通过 `heapq.heappop` 弹出堆顶元素，从而保持堆中始终有 k 个最大的元素。最后，当遍历完数组后，堆顶元素即为第 k 个最大的元素。

这种方法保证了时间复杂度为 O(n + k \log n)，非常适合处理大规模数据，并且在空间复杂度上也是 O(k)，即只需要维护一个大小为 k 的堆。